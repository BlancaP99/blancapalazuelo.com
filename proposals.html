<!-- =========================================================
     proposals.html – Galería por proyectos + filtros + visor
     (menú común · fondo inmóvil · autoplay móvil optimizado)
========================================================= -->
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PROPOSALS – Project</title>

<style>
/* ---------- 1. FUENTES ---------- */
@font-face{font-family:"Area Normal";src:url("/fonts/AreaNormal.woff2") format("woff2"),url("/fonts/AreaNormal.woff") format("woff");}
@font-face{font-family:"Sweet Sans Pro";src:url("/fonts/SWEETSANSPROREGULAR.OTF") format("opentype");}
@font-face{font-family:"Moglan Demo";src:url("/fonts/MOGLAN_DEMO.TTF") format("truetype");}

/* ---------- 2. RESET ---------- */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}

/* ---------- 3. FONDO INMÓVIL ---------- */
html,body{height:100%;}
body{
  background:url("/images/fondo_intro_2.png") center/cover no-repeat fixed;
  color:#fff;font-family:"Area Normal",sans-serif;
}
body::before{
  content:"";position:fixed;inset:0;
  background:url("/images/fondo_intro_2.png") center/cover no-repeat;
  z-index:-1;pointer-events:none;transform:translateZ(0);
}

/* ---------- 4. MENÚ ---------- */
nav{position:absolute;top:2rem;left:5%;display:flex;align-items:center;gap:1.5rem;font-family:"Sweet Sans Pro";font-size:.8rem;letter-spacing:1px;text-transform:uppercase;z-index:100;}
.nav-logo{height:1.4rem;cursor:pointer;}
.nav-separator{width:1px;height:1.2rem;background:#ffffff80;}
.nav-links{display:flex;gap:1.5rem;}
nav a{color:#fff;text-decoration:none;transition:font-weight .25s;}
nav a:hover{font-weight:700;}
.hamburger{display:none;}
.hamburger span{display:block;width:100%;height:2px;background:#fff;margin:5px 0;}

/* ---------- 5. CONTENEDOR PRINCIPAL ---------- */
.wrapper{max-width:70rem;margin:11rem auto 6rem;padding:0 1rem;display:flex;flex-direction:column;gap:3.2rem;}

/* ---------- 6. CABECERA ---------- */
h1{font-family:"Moglan Demo";font-size:1.4rem;font-weight:200;letter-spacing:.1rem;text-align:center;margin-bottom:.3rem;}
h2{font-family:"Sweet Sans Pro";font-weight:300;font-size:.9rem;letter-spacing:.2rem;text-align:center;}
.filter-bar{margin:2rem auto 0;display:flex;gap:1.2rem;flex-wrap:wrap;justify-content:center;}
.filter-btn{background:none;border:none;color:#fff;cursor:pointer;font-family:"Sweet Sans Pro";font-size:.75rem;letter-spacing:.1rem;text-transform:uppercase;position:relative;}
.filter-btn::after{content:"";position:absolute;left:0;bottom:-.2rem;width:0;height:1px;background:#fff;transition:.3s;}
.filter-btn.active::after{width:100%;}

/* ---------- 6.1 TÍTULOS DE SECCIÓN (pequeños) ---------- */
.section-title{
  font-family:"Sweet Sans Pro";
  font-weight:300;
  font-size:.78rem;
  letter-spacing:.22rem;
  text-transform:uppercase;
  opacity:.95;
  margin:0 auto .25rem;
  text-align:center;
}

/* ---------- 7. GALERÍA ---------- */
.gallery-section{display:flex;flex-direction:column;gap:.6rem;}
.media-row{display:grid;gap:.6rem;}
.media-row.cols-1{grid-template-columns:1fr;}
.media-row.cols-2{grid-template-columns:repeat(2,1fr);}
.media-row.cols-3{grid-template-columns:repeat(3,1fr);}
.media-row.cols-4{grid-template-columns:repeat(4,1fr);}
.gallery-section.tight .media-row{gap:.3rem;}

/* ---------- THUMBS ---------- */
.thumb{position:relative;cursor:pointer;border-radius:6px;overflow:hidden;}
.thumb::before{content:"";display:block;padding-top:56.25%;} /* 16:9 */
.thumb video,.thumb img{
  position:absolute;top:0;left:0;width:100%;height:100%;
  object-fit:cover;border-radius:6px;transition:transform .3s;
}
.thumb:hover video,.thumb:hover img{transform:scale(1.05);}

/* opcional: tarjetas “single” más contenidas */
.thumb.small{max-width:520px;margin:auto;}

/* ---------- 8. VISOR ---------- */
.viewer{position:fixed;inset:0;background:rgba(0,0,0,.9);display:none;justify-content:center;align-items:center;z-index:200;padding:1rem;}
.viewer.open{display:flex;}
.viewer-content{position:relative;display:flex;justify-content:center;align-items:center;}
.viewer-content video,.viewer-content img{width:auto;height:auto;max-width:90vw;max-height:90vh;object-fit:contain;border-radius:6px;}
.viewer-close{position:absolute;top:-2rem;right:0;font-size:2rem;background:none;border:none;color:#fff;cursor:pointer;}

/* ---------- 9. RESPONSIVE ---------- */
@media(max-width:1024px){.media-row.cols-4{grid-template-columns:repeat(3,1fr);} }
@media(max-width:768px){
  nav{left:0;right:0;width:100%;justify-content:center;}
  .nav-logo{margin:auto;}
  .nav-separator{display:none;}

  .hamburger{display:block;position:absolute;left:50%;top:2.5rem;width:26px;height:20px;transform:translateX(-50%);cursor:pointer;z-index:101;}
  .nav-links{display:none;}
  .nav-links.active{position:fixed;inset:0;background:rgba(0,0,0,.9);display:flex;flex-direction:column;gap:2rem;justify-content:center;align-items:center;font-family:"Moglan Demo","Area Normal",sans-serif;}

  .media-row.cols-3,.media-row.cols-4{grid-template-columns:repeat(2,1fr);}
  .viewer-content video,.viewer-content img{max-width:95vw;max-height:85vh;}
}
</style>
</head>

<body>

<!-- ======= MENÚ ======= -->
<nav>
  <a href="index.html#top"><img src="/images/BLANCA_NAME.png" class="nav-logo" alt="Home"></a>
  <span class="nav-separator"></span>
  <div class="nav-links" id="navLinks">
    <a href="projects.html">Projects</a>
    <a href="skills.html">Skills</a>
    <a href="about.html">About</a>
    <a href="contact.html">Contact</a>
    <a href="inquiry.html">Inquiry</a>
  </div>
  <span class="hamburger" id="hamburger"><span></span><span></span><span></span></span>
</nav>

<main class="wrapper">

  <!-- ---------- CABECERA ---------- -->
  <header>
    <h1>PROPOSALS</h1>
    <h2>PERSONAL&nbsp;INSPIRATIONS</h2>

    <div class="filter-bar">
      <button class="filter-btn active" data-filter="all">All</button>
      <button class="filter-btn" data-filter="3d">3D&nbsp;Animation</button>
      <button class="filter-btn" data-filter="motion">Motion&nbsp;Graphics</button>
      <button class="filter-btn" data-filter="illustration">Illustration</button>
      <button class="filter-btn" data-filter="ai">AI&nbsp;Image</button>
    </div>
  </header>

  <!-- =========================================================
       PROYECTOS (ordenados)
  ========================================================== -->

  <!-- ===== MAISON MERIDIAN (4) ===== -->
  <section class="gallery-section cat-3d" data-cat="3d">
    <h3 class="section-title">MAISON MERIDIAN</h3>
    <div class="media-row cols-4">
      <div class="thumb"><img src="PROPOSALS/maison_1.jpg" alt="" loading="lazy" decoding="async"></div>
      <div class="thumb"><img src="PROPOSALS/maison_2.jpg" alt="" loading="lazy" decoding="async"></div>
      <div class="thumb"><img src="PROPOSALS/maison_3.jpg" alt="" loading="lazy" decoding="async"></div>
      <div class="thumb"><img src="PROPOSALS/maison_4.jpg" alt="" loading="lazy" decoding="async"></div>
    </div>
  </section>

  <!-- ===== FURROW (máx 4) ===== -->
  <section class="gallery-section cat-3d" data-cat="3d">
    <h3 class="section-title">FURROW</h3>
    <div class="media-row cols-3">
      <div class="thumb">
        <video class="lazy-video" data-src="PROPOSALS/furrow_1.mp4" autoplay muted loop playsinline preload="metadata"></video>
      </div>
      <div class="thumb"><img src="PROPOSALS/furrow_2.jpg" alt="" loading="lazy" decoding="async"></div>
      <div class="thumb"><img src="PROPOSALS/furrow_3.jpg" alt="" loading="lazy" decoding="async"></div>
    </div>
  </section>

  <!-- ===== STREETXO X FEVER (1) ===== -->
  <section class="gallery-section cat-motion" data-cat="motion">
    <h3 class="section-title">STREETXO X FEVER</h3>
    <div class="media-row cols-1">
      <div class="thumb small">
        <video class="lazy-video" data-src="PROPOSALS/STREETXO_.mp4" autoplay muted loop playsinline preload="metadata"></video>
      </div>
    </div>
  </section>

  <!-- ===== THE ORDINARY (2) ===== -->
  <section class="gallery-section cat-3d" data-cat="3d">
    <h3 class="section-title">THE ORDINARY</h3>
    <div class="media-row cols-2">
      <div class="thumb"><img src="PROPOSALS/ordinary_1.jpg" alt="" loading="lazy" decoding="async"></div>
      <div class="thumb"><img src="PROPOSALS/ordinary_2.jpg" alt="" loading="lazy" decoding="async"></div>
    </div>
  </section>

  <!-- ===== RAYBAN (2) ===== -->
  <section class="gallery-section cat-3d" data-cat="3d">
    <h3 class="section-title">RAYBAN</h3>
    <div class="media-row cols-2">
      <div class="thumb"><img src="PROPOSALS/rayban_1.jpg" alt="" loading="lazy" decoding="async"></div>
      <div class="thumb"><img src="PROPOSALS/rayban_2.jpg" alt="" loading="lazy" decoding="async"></div>
    </div>
  </section>

  <!-- ===== JAGUAR (1) ===== -->
  <section class="gallery-section cat-3d" data-cat="3d">
    <h3 class="section-title">JAGUAR</h3>
    <div class="media-row cols-1">
      <div class="thumb small">
        <video class="lazy-video" data-src="PROPOSALS/jaguar.mp4" autoplay muted loop playsinline preload="metadata"></video>
      </div>
    </div>
  </section>

  <!-- =========================================================
       SECCIONES POR TIPO (mantiene filtros)
  ========================================================== -->

  <!-- ===== MOTION GRAPHICS (video_1..video_5) ===== -->
  <section class="gallery-section cat-motion" data-cat="motion">
    <h3 class="section-title">MOTION GRAPHICS</h3>
    <div class="media-row cols-3">
      <div class="thumb"><video class="lazy-video" data-src="PROPOSALS/video_1.mp4" autoplay muted loop playsinline preload="metadata"></video></div>
      <div class="thumb"><video class="lazy-video" data-src="PROPOSALS/video_2.mp4" autoplay muted loop playsinline preload="metadata"></video></div>
      <div class="thumb"><video class="lazy-video" data-src="PROPOSALS/video_3.mp4" autoplay muted loop playsinline preload="metadata"></video></div>
    </div>
    <div class="media-row cols-2">
      <div class="thumb"><video class="lazy-video" data-src="PROPOSALS/video_4.mp4" autoplay muted loop playsinline preload="metadata"></video></div>
      <div class="thumb"><video class="lazy-video" data-src="PROPOSALS/video_5.mp4" autoplay muted loop playsinline preload="metadata"></video></div>
    </div>
  </section>

  <!-- ===== ILLUSTRATION (ilu_1..ilu_5) ===== -->
  <section class="gallery-section cat-illustration tight" data-cat="illustration">
    <h3 class="section-title">ILLUSTRATION</h3>
    <div class="media-row cols-3">
      <div class="thumb"><img src="PROPOSALS/ilu_1.png" alt="" loading="lazy" decoding="async"></div>
      <div class="thumb"><img src="PROPOSALS/ilu_2.JPG" alt="" loading="lazy" decoding="async"></div>
      <div class="thumb"><img src="PROPOSALS/ilu_3.jpg" alt="" loading="lazy" decoding="async"></div>
    </div>
    <div class="media-row cols-2">
      <div class="thumb"><img src="PROPOSALS/ilu_4.jpg" alt="" loading="lazy" decoding="async"></div>
      <div class="thumb"><img src="PROPOSALS/ilu_5.png" alt="" loading="lazy" decoding="async"></div>
    </div>
  </section>

  <!-- ===== AI (ai_1..ai_2) ===== -->
  <section class="gallery-section cat-ai" data-cat="ai">
    <h3 class="section-title">AI IMAGE</h3>
    <div class="media-row cols-2">
      <div class="thumb"><img src="PROPOSALS/ai_1.png" alt="" loading="lazy" decoding="async"></div>
      <div class="thumb"><img src="PROPOSALS/ai_2.png" alt="" loading="lazy" decoding="async"></div>
    </div>
  </section>

</main>

<!-- ========== VISOR ========== -->
<div class="viewer" id="viewer">
  <div class="viewer-content" id="viewerContent"></div>
  <button class="viewer-close" id="viewerClose" aria-label="Cerrar">✕</button>
</div>

<script>
/* =========================================================
   1) Videos pesados: carga diferida + autoplay “suave”
   - Evita fallos por demasiadas descargas simultáneas
   - Mantiene calidad (no comprimimos nada)
========================================================= */
function primeInlineVideo(v){
  v.muted = true;
  v.setAttribute('playsinline','');
  v.setAttribute('webkit-playsinline','');
  v.preload = 'metadata';
}

function loadAndPlayVideo(v){
  // si aún no tiene src, lo ponemos desde data-src
  if(!v.getAttribute('src')){
    const src = v.dataset.src;
    if(src) v.src = src;
  }
  primeInlineVideo(v);
  // load + play (si el navegador lo permite)
  try{ v.load(); }catch(e){}
  v.play().catch(()=>{});
}

document.addEventListener('DOMContentLoaded',()=>{
  const vids = Array.from(document.querySelectorAll('video.lazy-video'));

  // Si no hay IntersectionObserver, cargamos todo (fallback)
  if(!('IntersectionObserver' in window)){
    vids.forEach(loadAndPlayVideo);
    return;
  }

  const io = new IntersectionObserver((entries)=>{
    entries.forEach(entry=>{
      const v = entry.target;
      if(entry.isIntersecting){
        loadAndPlayVideo(v);
      }else{
        // pausa cuando no está en pantalla (reduce CPU / fallos)
        try{ v.pause(); }catch(e){}
      }
    });
  }, { root:null, threshold:0.15 });

  vids.forEach(v=>{
    primeInlineVideo(v);
    io.observe(v);
  });
});

/* ---------- menú hamburguesa ---------- */
document.getElementById('hamburger')
  .addEventListener('click',()=>document.getElementById('navLinks').classList.toggle('active'));

/* ---------- visor ---------- */
const viewer      = document.getElementById('viewer');
const viewerCont  = document.getElementById('viewerContent');
const viewerClose = document.getElementById('viewerClose');

document.querySelectorAll('.thumb').forEach(t=>t.addEventListener('click',()=>openViewer(t)));

function openViewer(thumb){
  viewer.classList.add('open');
  viewerCont.innerHTML='';

  const original = thumb.firstElementChild;
  const node = original.cloneNode(true);

  if(node.tagName === 'VIDEO'){
    // Si era lazy (data-src), aseguramos src
    if(!node.getAttribute('src') && node.dataset && node.dataset.src){
      node.src = node.dataset.src;
    }
    node.muted = false;
    node.loop = true;
    node.controls = true;
    node.playsInline = true;
    node.setAttribute('playsinline','');
    node.setAttribute('webkit-playsinline','');
    node.preload = 'auto';
    node.currentTime = 0;
    node.play().catch(()=>{});
  }

  viewerCont.appendChild(node);
}

function closeViewer(){
  viewer.classList.remove('open');
  viewerCont.innerHTML='';
}

viewerClose.addEventListener('click',closeViewer);
viewer.addEventListener('click',e=>{ if(e.target===viewer) closeViewer(); });

/* ---------- filtros (mantiene comportamiento) ---------- */
const buttons  = document.querySelectorAll('.filter-btn');
const sections = document.querySelectorAll('.gallery-section');

buttons.forEach(btn=>{
  btn.addEventListener('click',()=>{
    buttons.forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    const filter = btn.dataset.filter;

    sections.forEach(sec=>{
      sec.style.display = (filter==='all' || sec.dataset.cat===filter) ? '' : 'none';
    });
  });
});
</script>

</body>
</html>
